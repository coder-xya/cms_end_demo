import{W as M,d as Q,p as N,b9 as W,o as t,a as C,g as P,t as w,u as l,i,w as c,U as _,k as m,e as z,M as x,aZ as Z,ai as E,_ as G}from"./index.d1360085.js";import{u as H,b as J,c as K,d as O,e as X}from"./format.ea5aae32.js";import"./el-checkbox.4528cdbf.js";import"./el-tooltip.fdcf7728.js";import{q as Y}from"./el-button.23dfc787.js";function k(a,y){const r=`${a}:${y}`,n=M().permissions;return console.log(r,n),!!n.find(h=>h.includes(r))}const ee={class:"content"},te={key:0,class:"header"},ne={class:"title"},ae={class:"table"},oe={class:"footer"},se=Q({__name:"page-content",props:{contentConfig:null},emits:["newDataClick","editDataClick"],setup(a,{expose:y,emit:r}){const n=a,h=k(n.contentConfig.pageName,"create"),L=k(n.contentConfig.pageName,"delete"),S=k(n.contentConfig.pageName,"update"),T=k(n.contentConfig.pageName,"query"),v=H(),d=N(1),p=N(10);function g(s={}){if(!T)return;const o=p.value,u=(d.value-1)*o;v.getPageListDataAction(n.contentConfig.pageName,{offset:u,size:o,...s})}g();const{pageList:B,pageTotalCount:F}=W(v);function U(){g()}function V(){d.value=1,p.value=10,g()}function $(){r("newDataClick")}function q(s){v.deletePageDataAction(n.contentConfig.pageName,s)}function A(s){r("editDataClick",s)}return y({fetchPageListData:g,handleResetClick:V}),(s,o)=>{var D;const u=Y,b=J,R=K,j=O;return t(),C("div",ee,[a.contentConfig.header?(t(),C("div",te,[P("h3",ne,w((D=a.contentConfig.header)==null?void 0:D.title),1),l(h)?(t(),i(u,{key:0,type:"primary",onClick:$},{default:c(()=>{var e;return[_(w((e=a.contentConfig.header)==null?void 0:e.btnTitle),1)]}),_:1})):m("",!0)])):m("",!0),P("div",ae,[z(R,E({data:l(B),border:!0,style:{width:"100%"}},a.contentConfig.childrenProps),{default:c(()=>[(t(!0),C(x,null,Z(a.contentConfig.propsList,e=>(t(),C(x,{key:e.prop},[e.type==="time"?(t(),i(b,{key:0,align:"center",prop:e.prop,label:e.label},{default:c(f=>[_(w(l(X)(f.row[e.prop])),1)]),_:2},1032,["prop","label"])):e.type==="handler"?(t(),i(b,{key:1,align:"center",label:e.label,width:e.width},{default:c(f=>[l(S)?(t(),i(u,{key:0,type:"primary",size:"small",icon:"EditPen",link:"",onClick:I=>A(f.row)},{default:c(()=>[_(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])):m("",!0),l(L)?(t(),i(u,{key:1,type:"danger",size:"small",icon:"Delete",link:"",onClick:I=>q(f.row.id)},{default:c(()=>[_(" \u5220\u9664 ")]),_:2},1032,["onClick"])):m("",!0)]),_:2},1032,["label","width"])):(t(),i(b,E({key:2,align:"center"},e),null,16))],64))),128))]),_:1},16,["data"])]),P("div",oe,[z(j,{currentPage:d.value,"onUpdate:currentPage":o[0]||(o[0]=e=>d.value=e),"page-size":p.value,"onUpdate:page-size":o[1]||(o[1]=e=>p.value=e),"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:l(F),onCurrentChange:U},null,8,["currentPage","page-size","total"])])])}}});const de=G(se,[["__scopeId","data-v-471ac076"]]);export{de as P};
