import{d as S,E as N,p as k,o as n,a as E,e as m,w as p,M as I,aZ as x,i as _,k as V,g as B,U as D,_ as $,r as O}from"./index.d1360085.js";import{q as z}from"./el-button.23dfc787.js";import{E as M,a as q}from"./el-form-item.e89aff5c.js";import{E as A,a as T,b as Z,c as j}from"./el-overlay.79e24577.js";import{E as L}from"./el-checkbox.4528cdbf.js";import"./el-tooltip.fdcf7728.js";import{u as G,E as H,a as J}from"./format.ea5aae32.js";const K={class:"search"},W={class:"btns"},X=S({__name:"page-search",props:{searchConfig:null},emits:["queryClick","resetClick"],setup(s,{emit:i}){var C;const d=s,a={};for(const h of d.searchConfig.formItems)a[h.prop]=(C=h.initialValue)!=null?C:"";const o=N(a),f=k();function F(){var h;(h=f.value)==null||h.resetFields(),i("resetClick")}function t(){i("queryClick",o)}return(h,P)=>{const v=L,r=A,u=M,g=T,w=Z,U=q,b=z;return n(),E("div",K,[m(U,{model:o,ref_key:"formRef",ref:f,"label-width":"120px",size:"large"},{default:p(()=>[m(w,{gutter:20},{default:p(()=>[(n(!0),E(I,null,x(s.searchConfig.formItems,l=>(n(),_(g,{key:l.prop,span:8},{default:p(()=>[m(u,{label:l.label,prop:l.prop},{default:p(()=>[l.type==="input"?(n(),_(v,{key:0,modelValue:o[l.prop],"onUpdate:modelValue":y=>o[l.prop]=y,placeholder:l.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):V("",!0),l.type==="password"?(n(),_(v,{key:1,"show-password":"",modelValue:o[l.prop],"onUpdate:modelValue":y=>o[l.prop]=y,placeholder:l.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):V("",!0),l.type==="date-picker"?(n(),_(r,{key:2,type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4",modelValue:o[l.prop],"onUpdate:modelValue":y=>o[l.prop]=y},null,8,["modelValue","onUpdate:modelValue"])):V("",!0)]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model"]),B("div",W,[m(b,{size:"large",icon:"Refresh",onClick:F},{default:p(()=>[D("\u91CD\u7F6E")]),_:1}),m(b,{size:"large",icon:"Search",type:"primary",onClick:t},{default:p(()=>[D(" \u67E5\u8BE2 ")]),_:1})])])}}});const ue=$(X,[["__scopeId","data-v-0c326c67"]]),Y={class:"modal"},ee={class:"form"},oe={class:"dialog-footer"},le=S({__name:"page-modal",props:{modalConfig:null,otherInfo:null},setup(s,{expose:i}){var v;const d=s,a=k(!1),o=k(!1),f=k(),F={};for(const r of d.modalConfig.formItems)F[r.prop]=(v=r.initialValue)!=null?v:"";const t=N(F),C=G();function h(){a.value=!1;let r={...t};d.otherInfo&&(r={...r,...d.otherInfo}),o.value?C.editPageDataAction(d.modalConfig.pageName,f.value.id,r):C.newPageDataAction(d.modalConfig.pageName,r)}function P(r=!0,u={}){a.value=!0,o.value=!r,f.value=u;for(const g in t)r?t[g]="":t[g]=u[g]}return i({setDialogVisible:P}),(r,u)=>{const g=L,w=H,U=J,b=A,l=M,y=q,R=z,Q=j;return n(),E("div",Y,[m(Q,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=e=>a.value=e),title:s.modalConfig.title,width:"30%",center:""},{footer:p(()=>[B("span",oe,[m(R,{onClick:u[1]||(u[1]=e=>a.value=!1)},{default:p(()=>[D("\u53D6\u6D88")]),_:1}),m(R,{type:"primary",onClick:h},{default:p(()=>[D("\u786E\u5B9A")]),_:1})])]),default:p(()=>[B("div",ee,[m(y,{model:t,"label-width":"80px",size:"large"},{default:p(()=>[(n(!0),E(I,null,x(s.modalConfig.formItems,e=>(n(),_(l,{key:e.prop,label:e.label,prop:e.prop},{default:p(()=>[e.type==="input"?(n(),_(g,{key:0,modelValue:t[e.prop],"onUpdate:modelValue":c=>t[e.prop]=c,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):V("",!0),e.type==="password"?(n(),_(g,{key:1,"show-password":"",modelValue:t[e.prop],"onUpdate:modelValue":c=>t[e.prop]=c,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):V("",!0),e.type==="select"?(n(),_(U,{key:2,modelValue:t.parentId,"onUpdate:modelValue":u[0]||(u[0]=c=>t.parentId=c),placeholder:e.placeholder,style:{width:"100%"}},{default:p(()=>[(n(!0),E(I,null,x(e.options,c=>(n(),_(w,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","placeholder"])):V("",!0),e.type==="date-picker"?(n(),_(b,{key:3,type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4",modelValue:t[e.prop],"onUpdate:modelValue":c=>t[e.prop]=c},null,8,["modelValue","onUpdate:modelValue"])):V("",!0),e.type==="custom"?O(r.$slots,e.slotName,{key:4},void 0,!0):V("",!0)]),_:2},1032,["label","prop"]))),128))]),_:3},8,["model"])])]),_:3},8,["modelValue","title"])])}}});const ce=$(le,[["__scopeId","data-v-a2080dc3"]]);function ie(s){const i=k();function d(){var o;(o=i.value)==null||o.setDialogVisible()}function a(o){var f;(f=i.value)==null||f.setDialogVisible(!1,o),s&&s(o)}return{modalRef:i,handleNewDataClick:d,handleEditDataClick:a}}function _e(){const s=k();function i(a){var o;(o=s.value)==null||o.fetchPageListData(a)}function d(){var a;(a=s.value)==null||a.handleResetClick()}return{contentRef:s,handleQueryClick:i,handleResetClick:d}}export{ue as P,ie as a,ce as b,_e as u};
